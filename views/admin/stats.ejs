<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta Tags for Bootstrap 5 -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/stylesheets/admin/stats.css" />
    <link rel="stylesheet" href="/stylesheets/admin/navbar.css" />
    <link rel="icon" href="https://res.cloudinary.com/dfezowkdc/image/upload/v1697096319/kickstore_logo_dbympn.png">
    <title>KickStore - Admin</title>
  </head>
  <body>

    <%- include('../partials/adminSidebar.ejs') %>

        <!-- content body -->
        <div
          class="content container-fluid d-flex flex-column align-items-center"
        >
          <button id="browse-reports" onclick="openReports()">Browse reports <i class='bx bxs-down-arrow'></i></button>
          <div id="select-reports" class="d-none">
            <div onclick="route('sales-reports')" class="report-option">Sales reports</div>
            <div onclick="route('stocks-reports')" class="report-option">Stocks reports</div>
          </div>
          <div class="d-flex w-100 justify-content-evenly align-items-center row">
             <canvas class="col-12 col-md-9" id="chart"></canvas>
            <div class="stat-cards-con col-12 col-md-3">

              <div class="stat-card">
                <div class="stat-name"><i style="font-size: 1.2rem;" class='bx bx-money'></i> Total revenue</i></div>
                <div class="stat-value">&#8377 <%= totalRevenue %></div>
              </div>

              <div class="stat-card">
                <div class="stat-name"> <i style="font-size: 1.2rem;" class='bx bx-package'></i> Orders completed</div>
                <div class="stat-value"><%= orderCount %></div>
              </div>

              <div class="stat-card">
                <div class="stat-name"> <i style="font-size: 1.2rem;" class='bx bx-user'></i> New users</div>
                <div class="stat-value"><%= userCount %></div>
              </div>

            </div>
          </div>

          <div class="row" style="width: 100%;">
          <p class="title-without-button">TOP SELLING PRODUCTS</p>
          <div class="section-row">
            <% products.forEach((product)=>{ %>
            <div onclick="viewProductDetails('<%= product._id %>')" class="section">
              <img class="product-image" loading="lazy" src="<%= product.image %>" alt="" />
              <div class="product-text"><%= product.brand %></div>
              <div class="product-name"><%= product.name %></div>
              <div class="orderedCount fw-bold">Orders: <span style="font-weight: 1.2rem; color: darkcyan"><%= product.orderedCount  %></span></div>
            </div>
            <% }) %>
        </div>


          <div class="space"></div>
        </div>
      </div>
    </main>
    
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

        <script src="/scripts/admin/stats.js"></script>

  </body>
</html>